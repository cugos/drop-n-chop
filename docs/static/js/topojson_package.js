!function e(o,i,a){function u(t,n){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!n&&r)return r(t,!0);if(c)return c(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(n){return u(o[t][1][n]||n)},r,r.exports,e,o,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,n=0;n<a.length;n++)u(a[n]);return u}({1:[function(n,t,r){window.topojson={topology:n("../node_modules/topojson/lib/topojson/topology"),client:n("../node_modules/topojson/build/topojson.js")}},{"../node_modules/topojson/build/topojson.js":3,"../node_modules/topojson/lib/topojson/topology":15}],2:[function(n,t,r){var e,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(n){e=i}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(n){o=a}}();var c,f=[],s=!1,l=-1;function h(){s&&c&&(s=!1,c.length?f=c.concat(f):l=-1,f.length&&p())}function p(){if(!s){var n=u(h);s=!0;for(var t=f.length;t;){for(c=f,f=[];++l<t;)c&&c[l].run();l=-1,t=f.length}c=null,s=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(n){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(n)}}function g(n,t){this.fun=n,this.array=t}function d(){}t.nextTick=function(n){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new g(n,t)),1!==f.length||s||u(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.prependListener=d,t.prependOnceListener=d,t.listeners=function(n){return[]},t.binding=function(n){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(n){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],3:[function(n,t,r){var e,o;e=this,o=function(n){"use strict";function g(){}function d(n){if(!n)return g;var r,e,o=n.scale[0],i=n.scale[1],a=n.translate[0],u=n.translate[1];return function(n,t){t||(r=e=0),n[0]=(r+=n[0])*o+a,n[1]=(e+=n[1])*i+u}}function v(n,t){for(var r=0,e=n.length;r<e;){var o=r+e>>>1;n[o]<t?r=1+o:e=o}return r}function r(n,t){n={type:"Feature",id:t.id,properties:t.properties||{},geometry:o(n,t)};return null==t.id&&delete n.id,n}function o(n,t){var a=d(n.transform),u=n.arcs;function o(n,t){t.length&&t.pop();for(var r,e=u[n<0?~n:n],o=0,i=e.length;o<i;++o)t.push(r=e[o].slice()),a(r,o);n<0&&function(n,t){for(var r,e=n.length,o=e-t;o<--e;)r=n[o],n[o++]=n[e],n[e]=r}(t,i)}function r(n){return n=n.slice(),a(n,0),n}function e(n){for(var t=[],r=0,e=n.length;r<e;++r)o(n[r],t);return t.length<2&&t.push(t[0].slice()),t}function i(n){for(var t=e(n);t.length<4;)t.push(t[0].slice());return t}function c(n){return n.map(i)}var f={Point:function(n){return r(n.coordinates)},MultiPoint:function(n){return n.coordinates.map(r)},LineString:function(n){return e(n.arcs)},MultiLineString:function(n){return n.arcs.map(e)},Polygon:function(n){return c(n.arcs)},MultiPolygon:function(n){return n.arcs.map(c)}};return function n(t){var r=t.type;return"GeometryCollection"===r?{type:r,geometries:t.geometries.map(n)}:r in f?{type:r,coordinates:f[r](t)}:null}(t)}function h(a,e){var o={},u={},c={},i=[],f=-1;function n(n,t){for(var r in n){var e=n[r];delete t[e.start],delete e.start,delete e.end,e.forEach(function(n){o[n<0?~n:n]=1}),i.push(e)}}return e.forEach(function(n,t){var r=a.arcs[n<0?~n:n];r.length<3&&!r[1][0]&&!r[1][1]&&(r=e[++f],e[f]=n,e[t]=r)}),e.forEach(function(n){var t,r,e=function(n){var t,r=a.arcs[n<0?~n:n],e=r[0];a.transform?(t=[0,0],r.forEach(function(n){t[0]+=n[0],t[1]+=n[1]})):t=r[r.length-1];return n<0?[t,e]:[e,t]}(n),o=e[0],i=e[1];(e=c[o])?(delete c[e.end],e.push(n),e.end=i,(t=u[i])?(delete u[t.start],r=t===e?e:e.concat(t),u[r.start=e.start]=c[r.end=t.end]=r):u[e.start]=c[e.end]=e):(e=u[i])?(delete u[e.start],e.unshift(n),e.start=o,(t=c[o])?(delete c[t.end],r=t===e?e:t.concat(e),u[r.start=t.start]=c[r.end=e.end]=r):u[e.start]=c[e.end]=e):u[(e=[n]).start=o]=c[e.end=i]=e}),n(c,u),n(u,c),e.forEach(function(n){o[n<0?~n:n]||i.push([n])}),i}function t(n,t,r){var e=[];function o(n){var t=n<0?~n:n;(c[t]||(c[t]=[])).push({i:n,g:u})}function i(n){n.forEach(o)}function a(n){n.forEach(i)}if(1<arguments.length){var u,c=[],f={LineString:i,MultiLineString:a,Polygon:a,MultiPolygon:function(n){n.forEach(a)}};!function n(t){"GeometryCollection"===t.type?t.geometries.forEach(n):t.type in f&&f[(u=t).type](t.arcs)}(t),c.forEach(arguments.length<3?function(n){e.push(n[0].i)}:function(n){r(n[0].g,n[n.length-1].g)&&e.push(n[0].i)})}else for(var s=0,l=n.arcs.length;s<l;++s)e.push(s);return{type:"MultiLineString",arcs:h(n,e)}}function i(n){var t=n[0],r=n[1],n=n[2];return Math.abs((t[0]-n[0])*(r[1]-t[1])-(t[0]-r[0])*(n[1]-t[1]))}function e(u,n){var c={},r=[],e=[];function t(t){t.forEach(function(n){n.forEach(function(n){(c[n=n<0?~n:n]||(c[n]=[])).push(t)})}),r.push(t)}function f(n){return Math.abs(function(n){for(var t,r=-1,e=n.length,o=n[e-1],i=0;++r<e;)t=o,o=n[r],i+=t[0]*o[1]-t[1]*o[0];return i/2}(o(u,{type:"Polygon",arcs:[n]}).coordinates[0]))}return n.forEach(function(n){"Polygon"===n.type?t(n.arcs):"MultiPolygon"===n.type&&n.arcs.forEach(t)}),r.forEach(function(n){if(!n._){var t=[],r=[n];for(n._=1,e.push(t);n=r.pop();)t.push(n),n.forEach(function(n){n.forEach(function(n){c[n<0?~n:n].forEach(function(n){n._||(n._=1,r.push(n))})})})}}),r.forEach(function(n){delete n._}),{type:"MultiPolygon",arcs:e.map(function(n){var t,r=[];if(n.forEach(function(n){n.forEach(function(n){n.forEach(function(n){c[n<0?~n:n].length<2&&r.push(n)})})}),1<(t=(r=h(u,r)).length))for(var e,o,i=1,a=f(r[0]);i<t;++i)(e=f(r[i]))>a&&(o=r[0],r[0]=r[i],r[i]=o,a=e);return r})}}function c(n,t){return n[1][2]-t[1][2]}n.version="1.6.27",n.mesh=function(n){return o(n,t.apply(this,arguments))},n.meshArcs=t,n.merge=function(n){return o(n,e.apply(this,arguments))},n.mergeArcs=e,n.feature=function(t,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return r(t,n)})}:r(t,n)},n.neighbors=function(n){var e={},t=n.map(function(){return[]});function r(n,r){n.forEach(function(n){n<0&&(n=~n);var t=e[n];t?t.push(r):e[n]=[r]})}function o(n,t){n.forEach(function(n){r(n,t)})}var i,a={LineString:r,MultiLineString:o,Polygon:o,MultiPolygon:function(n,t){n.forEach(function(n){o(n,t)})}};for(i in n.forEach(function t(n,r){"GeometryCollection"===n.type?n.geometries.forEach(function(n){t(n,r)}):n.type in a&&a[n.type](n.arcs,r)}),e)for(var u=e[i],c=u.length,f=0;f<c;++f)for(var s=f+1;s<c;++s){var l,h=u[f],p=u[s];(l=t[h])[i=v(l,p)]!==p&&l.splice(i,0,p),(l=t[p])[i=v(l,h)]!==h&&l.splice(i,0,h)}return t},n.presimplify=function(n,f){var t,a,u,s=d(n.transform),l=function(n){if(!n)return g;var e,o,i=n.scale[0],a=n.scale[1],u=n.translate[0],c=n.translate[1];return function(n,t){t||(e=o=0);var r=Math.round((n[0]-u)/i),t=Math.round((n[1]-c)/a);n[0]=r-e,n[1]=t-o,e=r,o=t}}(n.transform),h=(a=[],u=0,(t={}).push=function(n){return e(a[n._=u]=n,u++),u},t.pop=function(){if(!(u<=0)){var n,t=a[0];return 0<--u&&(n=a[u],o(a[n._=0]=n,0)),t}},t.remove=function(n){var t,r=n._;if(a[r]===n)return r!==--u&&(c(t=a[u],n)<0?e:o)(a[t._=r]=t,r),r},t);function e(n,t){for(;0<t;){var r=(t+1>>1)-1,e=a[r];if(0<=c(n,e))break;a[e._=t]=e,a[n._=t=r]=n}}function o(n,t){for(;;){var r=t+1<<1,e=r-1,o=t,i=a[o];if(e<u&&c(a[e],i)<0&&(i=a[o=e]),r<u&&c(a[r],i)<0&&(i=a[o=r]),o===t)break;a[i._=t]=i,a[n._=t=o]=n}}function p(n){h.remove(n),n[1][2]=f(n),h.push(n)}return f=f||i,n.arcs.forEach(function(n){for(var t,r,e=[],o=0,i=0,a=n.length;i<a;++i)r=n[i],s(n[i]=[r[0],r[1],1/0],i);for(i=1,a=n.length-1;i<a;++i)(t=n.slice(i-1,i+2))[1][2]=f(t),e.push(t),h.push(t);for(i=0,a=e.length;i<a;++i)(t=e[i]).previous=e[i-1],t.next=e[i+1];for(;t=h.pop();){var u=t.previous,c=t.next;t[1][2]<o?t[1][2]=o:o=t[1][2],u&&(u.next=c,u[2]=t[2],p(u)),c&&(c.previous=u,c[0]=t[0],p(c))}n.forEach(l)}),n},Object.defineProperty(n,"__esModule",{value:!0})},"object"==typeof r&&void 0!==t?o(r):"function"==typeof define&&define.amd?define(["exports"],o):o(e.topojson=e.topojson||{})},{}],4:[function(n,t,r){t.exports=function(n){var r=1/0,e=1/0,o=-1/0,i=-1/0;function t(n){n&&u.hasOwnProperty(n.type)&&u[n.type](n)}var a,u={GeometryCollection:function(n){n.geometries.forEach(t)},Point:function(n){c(n.coordinates)},MultiPoint:function(n){n.coordinates.forEach(c)},LineString:function(n){f(n.coordinates)},MultiLineString:function(n){n.coordinates.forEach(f)},Polygon:function(n){n.coordinates.forEach(f)},MultiPolygon:function(n){n.coordinates.forEach(s)}};function c(n){var t=n[0],n=n[1];t<r&&(r=t),o<t&&(o=t),n<e&&(e=n),i<n&&(i=n)}function f(n){n.forEach(c)}function s(n){n.forEach(f)}for(a in n)t(n[a]);return[r,e,o,i]}},{}],5:[function(n,t,r){r.name="cartesian",r.formatDistance=function(n){return n.toString()},r.ringArea=function(n){var t,r=-1,e=n.length,o=n[e-1],i=0;for(;++r<e;)t=o,o=n[r],i+=t[0]*o[1]-t[1]*o[0];return.5*i},r.absoluteArea=Math.abs,r.triangleArea=function(n){return Math.abs((n[0][0]-n[2][0])*(n[1][1]-n[0][1])-(n[0][0]-n[1][0])*(n[2][1]-n[0][1]))},r.distance=function(n,t,r,e){r=n-r,e=t-e;return Math.sqrt(r*r+e*e)}},{}],6:[function(n,t,r){t.exports=function(n,r){function t(n){var t=r(n);null==t?delete n.id:n.id=t}arguments.length<2&&(r=function(n){return n.id});var e,o,i={Feature:t,FeatureCollection:function(n){n.features.forEach(t)}};for(e in n)(o=n[e])&&i.hasOwnProperty(o.type)&&i[o.type](o);return n}},{}],7:[function(n,t,r){t.exports={cartesian:n("./cartesian"),spherical:n("./spherical")}},{"./cartesian":5,"./spherical":13}],8:[function(n,t,r){t.exports=function(n){for(var t=n.arcs,r=-1,e=t.length;++r<e;)for(var o,i,a=t[r],u=0,c=a.length,f=a[0],s=f[0],l=f[1];++u<c;)o=(f=a[u])[0],i=f[1],a[u]=[o-s,i-l],s=o,l=i;return n}},{}],9:[function(n,t,r){t.exports=function(n){function t(n){var t=n.geometry;return null==t?n.type=null:(o(t),n.type=t.type,t.geometries?n.geometries=t.geometries:t.coordinates&&(n.coordinates=t.coordinates)),delete n.geometry,n}function o(n){return n?(a.hasOwnProperty(n.type)&&a[n.type](n),n):{type:null}}var r,e,i={Feature:t,FeatureCollection:function(n){return n.type="GeometryCollection",n.geometries=n.features,n.features.forEach(t),delete n.features,n}},a={GeometryCollection:function(n){for(var t=n.geometries,r=-1,e=t.length;++r<e;)t[r]=o(t[r])},MultiPoint:function(n){n.coordinates.length?n.coordinates.length<2&&(n.type="Point",n.coordinates=n.coordinates[0]):(n.type=null,delete n.coordinates)},LineString:function(n){n.coordinates.length||(n.type=null,delete n.coordinates)},MultiLineString:function(n){for(var t=n.coordinates,r=0,e=0,o=t.length;r<o;++r){var i=t[r];i.length&&(t[e++]=i)}e?e<2?(n.type="LineString",n.coordinates=t[0]):n.coordinates.length=e:(n.type=null,delete n.coordinates)},Polygon:function(n){for(var t=n.coordinates,r=0,e=0,o=t.length;r<o;++r){var i=t[r];i.length&&(t[e++]=i)}e?n.coordinates.length=e:(n.type=null,delete n.coordinates)},MultiPolygon:function(n){for(var t=n.coordinates,r=0,e=0,o=t.length;r<o;++r){for(var i=t[r],a=0,u=0,c=i.length;a<c;++a){var f=i[a];f.length&&(i[u++]=f)}u&&(i.length=u,t[e++]=i)}e?e<2?(n.type="Polygon",n.coordinates=t[0]):t.length=e:(n.type=null,delete n.coordinates)}};for(r in n)n[r]=((e=n[r])&&i.hasOwnProperty(e.type)?i[e.type]:o)(e);return n}},{}],10:[function(n,t,r){var s=n("./quantize");t.exports=function(n,t,r){if(t){if(r===t||!n.bbox.every(isFinite))return n;var e=r/t,o=s(0,0,e,e);n.transform.scale[0]/=e,n.transform.scale[1]/=e}else{var i=n.bbox,a=isFinite(i[0])?i[0]:0,t=isFinite(i[1])?i[1]:0,e=isFinite(i[2])?i[2]:0,i=isFinite(i[3])?i[3]:0,o=s(-a,-t,e-a?(r-1)/(e-a):1,i-t?(r-1)/(i-t):1);n.transform=o.transform}function u(n){n&&f.hasOwnProperty(n.type)&&f[n.type](n)}var c,f={GeometryCollection:function(n){n.geometries.forEach(u)},Point:function(n){o.point(n.coordinates)},MultiPoint:function(n){n.coordinates.forEach(o.point)}};for(c in n.objects)u(n.objects[c]);return n.arcs=n.arcs.map(function(n){return o.line(n=n.map(function(n){return n.slice()})),n.length<2&&n.push(n[0]),n}),n}},{"./quantize":12}],11:[function(n,t,r){var h=n("./quantize");t.exports=function(n,t,r,e){arguments.length<4&&(e=r);var o=isFinite(t[0])?t[0]:0,i=isFinite(t[1])?t[1]:0,a=isFinite(t[2])?t[2]:0,u=isFinite(t[3])?t[3]:0,c=h(-o,-i,a-o?(e-1)/(a-o)*r/e:1,u-i?(e-1)/(u-i)*r/e:1);function f(n){n&&l.hasOwnProperty(n.type)&&l[n.type](n)}var s,l={GeometryCollection:function(n){n.geometries.forEach(f)},Point:function(n){c.point(n.coordinates)},MultiPoint:function(n){n.coordinates.forEach(c.point)},LineString:function(n){n=n.coordinates;c.line(n),n.length<2&&(n[1]=n[0])},MultiLineString:function(n){for(var t=n.coordinates,r=0,e=t.length;r<e;++r){var o=t[r];c.line(o),o.length<2&&(o[1]=o[0])}},Polygon:function(n){for(var t=n.coordinates,r=0,e=t.length;r<e;++r){var o=t[r];for(c.line(o);o.length<4;)o.push(o[0])}},MultiPolygon:function(n){for(var t=n.coordinates,r=0,e=t.length;r<e;++r)for(var o=t[r],i=0,a=o.length;i<a;++i){var u=o[i];for(c.line(u);u.length<4;)u.push(u[0])}}};for(s in n)f(n[s]);return c.transform}},{"./quantize":12}],12:[function(n,t,r){t.exports=function(t,r,e,o){function s(n){return n[0]=Math.round((n[0]+t)*e),n[1]=Math.round((n[1]+r)*o),n}return{point:s,line:function(n){for(var t,r,e,o=0,i=1,a=n.length,u=s(n[0]),c=u[0],f=u[1];++o<a;)r=(u=s(n[o]))[0],e=u[1],r===c&&e===f||((t=n[i++])[0]=c=r,t[1]=f=e);n.length=i},transform:{scale:[1/e,1/o],translate:[-t,-r]}}}},{}],13:[function(n,t,r){var d=Math.PI,v=d/4,y=d/180;function o(n,t){var r=(t[0]-n[0])*y,e=Math.sin(r),o=Math.cos(r),i=Math.sin(n[1]*y),r=Math.cos(n[1]*y),n=Math.sin(t[1]*y),t=Math.cos(t[1]*y);return Math.atan2(Math.sqrt((e=t*e)*e+(e=r*n-i*t*o)*e),i*n+r*t*o)}function i(n){return(n=Math.sin(n/2))*n}r.name="spherical",r.formatDistance=function(n){var t=n*y*6371;return(1<t?t.toFixed(3)+"km":(1e3*t).toPrecision(3)+"m")+" ("+n.toPrecision(3)+"°)"},r.ringArea=function(n){if(!n.length)return 0;for(var t=0,r=n[0],e=r[0]*y,o=r[1]*y/2+v,i=e,a=Math.cos(o),u=Math.sin(o),c=1,f=n.length;c<f;++c){r=n[c],e=r[0]*y,o=r[1]*y/2+v;var s=e-i,l=Math.cos(o),h=Math.sin(o),p=u*h,g=a*l+p*Math.cos(s),s=p*Math.sin(s);t+=Math.atan2(s,g),i=e,a=l,u=h}return 2*(d<t?t-2*d:t<-d?t+2*d:t)},r.absoluteArea=function(n){return n<0?n+4*d:n},r.triangleArea=function(n){var t=o(n[0],n[1]),r=o(n[1],n[2]),e=o(n[2],n[0]),n=(t+r+e)/2;return 4*Math.atan(Math.sqrt(Math.max(0,Math.tan(n/2)*Math.tan((n-t)/2)*Math.tan((n-r)/2)*Math.tan((n-e)/2))))},r.distance=function(n,t,r,e){return n*=y,t*=y,r*=y,e*=y,2*Math.asin(Math.sqrt(i(e-t)+Math.cos(t)*Math.cos(e)*i(r-n)))}},{}],14:[function(n,t,r){var l=n("./type");t.exports=function(n,t){var r,e,o,i=-180,P=i+.01,x=179.99,a=-90,b=a+.01,u=90,q=u-.01;function L(n){return n<=b?[0,a]:q<=n?[0,u]:[i,n]}function c(n){for(var t=[],r=0,e=n.length;r<e;++r){for(var o=n[r],i=0,a=o.length;i<a;++i){var u=o[i];u.polygon=o,t.push(u);for(var c=0,f=u.length;c<f;++c){var s=u[c],l=s[0],s=s[1];if(l<=P||x<=l||s<=b||q<=s){for(var h=c+1;h<f;++h){var p=u[h],g=p[0],p=p[1];if(P<g&&g<x&&b<p&&p<q)break}if(h!==c+1){if(c?((l=u.slice(0,c+1)).polygon=o,l[l.length-1]=L(s),t[t.length-1]=l):t.pop(),f<=h)break;t.push(u=u.slice(h-1)),u[0]=L(u[0][1]),u.polygon=o,c=-1,f=u.length}}}}o.length=0}for(var d={},v={},c=0,f=t.length;c<f;++c){var y=(M=t[c])[0],m=M[M.length-1];y[0]!==m[0]||y[1]!==m[1]?(M.index=c,d[y]=v[m]=M):(M.polygon.push(M),t[c]=null)}for(var M,w,E,c=0;c<f;++c){(M=t[c])&&(y=M[0],m=M[M.length-1],w=v[y],E=d[m],delete d[y],delete v[m],y[0]!==m[0]||y[1]!==m[1]?w?(delete v[y],delete d[w[0]],w.pop(),t[w.index]=null,(M=w.concat(M)).polygon=w.polygon,w===E?M.polygon.push(M):(M.index=f++,t.push(d[M[0]]=v[M[M.length-1]]=M))):E?(delete d[m],delete v[E[E.length-1]],M.pop(),(M=M.concat(E)).polygon=E.polygon,M.index=f++,t[E.index]=null,t.push(d[M[0]]=v[M[M.length-1]]=M)):(M.push(M[0]),M.polygon.push(M)):M.polygon.push(M))}}t&&(r=t.scale[0],e=t.scale[1],o=t.translate[0],t=t.translate[1],i=Math.round((i-o)/r),Math.round((180-o)/r),a=Math.round((a-t)/e),u=Math.round((u-t)/e),P=Math.round((P-o)/r),x=Math.round((x-o)/r),b=Math.round((b-t)/e),q=Math.round((q-t)/e));var f,s=l({Polygon:function(n){c([n.coordinates])},MultiPolygon:function(n){c(n.coordinates)}});for(f in n)s.object(n[f])}},{"./type":26}],15:[function(n,t,r){(function(E){(function(){n("./type");var s=n("./stitch"),l=n("./coordinate-systems"),h=n("./topology/index"),p=n("./delta"),g=n("./geomify"),d=n("./pre-quantize"),v=n("./post-quantize"),y=n("./bounds"),m=n("./compute-id"),M=n("./transform-properties"),w=1e-6;t.exports=function(n,t){var r,e=1e4,o=1e4,i=function(n){return n.id},a=function(){},u=!0,c=!1,f=null;if(t&&("verbose"in t&&(c=!!t.verbose),"stitch-poles"in t&&(u=!!t["stitch-poles"]),"coordinate-system"in t&&(f=l[t["coordinate-system"]]),"minimum-area"in t&&t["minimum-area"],"quantization"in t&&(e=o=+t.quantization),"pre-quantization"in t&&(e=+t["pre-quantization"]),"post-quantization"in t&&(o=+t["post-quantization"]),"id"in t&&(i=t.id),"property-transform"in t&&(a=t["property-transform"])),e/o%1)throw new Error("post-quantization is not a divisor of pre-quantization");if(e&&!o)throw new Error("post-quantization is required when input is already quantized");m(n,i),M(n,a),g(n);i=y(n),a=i[0]<-180-w||i[1]<-90-w||i[2]>180+w||i[3]>90+w;if(f||(f=l[a?"cartesian":"spherical"],t&&(t["coordinate-system"]=f.name)),f===l.spherical){if(a)throw new Error("spherical coordinates outside of [±180°, ±90°]");i[0]<w-180&&(i[0]=-180),i[1]<w-90&&(i[1]=-90),i[2]>180-w&&(i[2]=180),i[3]>90-w&&(i[3]=90)}c&&E.stderr.write("bounds: "+i.join(" ")+" ("+f.name+")\n"),e&&(r=d(n,i,e,o),c&&E.stderr.write("pre-quantization: "+r.scale.map(function(n){return f.formatDistance(n)}).join(" ")+"\n")),f===l.spherical&&u&&s(n,r);n=h(n);return e&&(n.transform=r),n.bbox=i,c&&E.stderr.write("topology: "+n.arcs.length+" arcs, "+n.arcs.reduce(function(n,t){return n+t.length},0)+" points\n"),o&&o!==e&&(v(n,e,o),r=n.transform,c&&E.stderr.write("post-quantization: "+r.scale.map(function(n){return f.formatDistance(n)}).join(" ")+"\n")),o&&p(n),n}}).call(this)}).call(this,n("_process"))},{"./bounds":4,"./compute-id":6,"./coordinate-systems":7,"./delta":8,"./geomify":9,"./post-quantize":10,"./pre-quantize":11,"./stitch":14,"./topology/index":21,"./transform-properties":25,"./type":26,_process:2}],16:[function(n,t,r){var w=n("./join");function E(n,t,r){for(var e,o=t+(r---t>>1);t<o;++t,--r)e=n[t],n[t]=n[r],n[r]=e}t.exports=function(n){for(var t=w(n),r=n.coordinates,e=n.lines,o=n.rings,i=0,a=e.length;i<a;++i)for(var u=e[i],c=u[0],f=u[1];++c<f;){t.has(r[c])&&(g={0:c,1:u[1]},u[1]=c,u=u.next=g)}for(var s,l,h,p,i=0,a=o.length;i<a;++i)for(var g,d=o[i],v=d[0],y=v,m=d[1],M=t.has(r[v]);++y<m;){t.has(r[y])&&(M?(g={0:y,1:d[1]},d[1]=y,d=d.next=g):(p=(h=m)-y,E(s=r,l=v,h),E(s,l,l+p),E(s,l+p,h),r[m]=r[v],M=!0,y=v))}return n}},{"./join":22}],17:[function(n,t,r){n("./join");var d=n("./hashmap"),v=n("./point-hash"),y=n("./point-equal");t.exports=function(n){var s=n.coordinates,t=n.lines,r=n.rings,e=t.length+r.length;delete n.lines,delete n.rings;for(var o=0,i=t.length;o<i;++o)for(var a=t[o];a=a.next;)++e;for(o=0,i=r.length;o<i;++o)for(var u=r[o];u=u.next;)++e;for(var f=d(2*e*1.4,v,y),l=n.arcs=[],o=0,i=t.length;o<i;++o)for(a=t[o];c(a),a=a.next;);for(o=0,i=r.length;o<i;++o){if((u=r[o]).next)for(;c(u),u=u.next;);else!function(n){var t,r;if(r=f.get(t=s[n[0]]))for(var e=0,o=r.length;e<o;++e){if(h(i=r[e],n))return n[0]=i[0],n[1]=i[1];if(p(i,n))return n[0]=i[1],n[1]=i[0]}if(r=f.get(t=s[n[0]+g(n)]))for(var i,e=0,o=r.length;e<o;++e){if(h(i=r[e],n))return n[0]=i[0],n[1]=i[1];if(p(i,n))return n[0]=i[1],n[1]=i[0]}r?r.push(n):f.set(t,[n]);l.push(n)}(u)}function c(n){var t,r,e,o;if(e=f.get(t=s[n[0]]))for(var i=0,a=e.length;i<a;++i){var u=e[i];if(function(n,t){var r=n[0],e=t[0],o=n[1],t=t[1];if(r-o!=e-t)return!1;for(;r<=o;++r,++e)if(!y(s[r],s[e]))return!1;return!0}(u,n))return n[0]=u[0],void(n[1]=u[1])}if(o=f.get(r=s[n[1]]))for(i=0,a=o.length;i<a;++i){var c=o[i];if(function(n,t){var r=n[0],e=t[0],o=n[1],i=t[1];if(r-o!=e-i)return!1;for(;r<=o;++r,--i)if(!y(s[r],s[i]))return!1;return!0}(c,n))return n[1]=c[0],void(n[0]=c[1])}e?e.push(n):f.set(t,[n]),o?o.push(n):f.set(r,[n]),l.push(n)}function h(n,t){var r=n[0],e=t[0],o=n[1]-r;if(o==t[1]-e){for(var i=g(n),a=g(t),u=0;u<o;++u)if(!y(s[r+(u+i)%o],s[e+(u+a)%o]))return;return 1}}function p(n,t){var r=n[0],e=t[0],o=n[1],i=t[1],a=o-r;if(a==i-e){for(var u=g(n),c=a-g(t),f=0;f<a;++f)if(!y(s[r+(f+u)%a],s[i-(f+c)%a]))return;return 1}}function g(n){for(var t=n[0],r=n[1],e=t,o=e,i=s[e];++e<r;){var a=s[e];(a[0]<i[0]||a[0]===i[0]&&a[1]<i[1])&&(o=e,i=a)}return o-t}return n}},{"./hashmap":19,"./join":22,"./point-equal":23,"./point-hash":24}],18:[function(n,t,r){t.exports=function(n){var o=-1,i=[],a=[],u=[];function t(n){n&&e.hasOwnProperty(n.type)&&e[n.type](n)}var r,e={GeometryCollection:function(n){n.geometries.forEach(t)},LineString:function(n){n.arcs=c(n.coordinates),delete n.coordinates},MultiLineString:function(n){n.arcs=n.coordinates.map(c),delete n.coordinates},Polygon:function(n){n.arcs=n.coordinates.map(f),delete n.coordinates},MultiPolygon:function(n){n.arcs=n.coordinates.map(s),delete n.coordinates}};function c(n){for(var t=0,r=n.length;t<r;++t)u[++o]=n[t];var e={0:o-r+1,1:o};return i.push(e),e}function f(n){for(var t=0,r=n.length;t<r;++t)u[++o]=n[t];var e={0:o-r+1,1:o};return a.push(e),e}function s(n){return n.map(f)}for(r in n)t(n[r]);return{type:"Topology",coordinates:u,lines:i,rings:a,objects:n}}},{}],19:[function(n,t,r){t.exports=function(i,a,u,n,c,t){3===arguments.length&&(n=t=Array,c=null);for(var f=new n(i=1<<Math.max(4,Math.ceil(Math.log(i)/Math.LN2))),s=new t(i),l=i-1,r=0;r<i;++r)f[r]=c;return{set:function(n,t){for(var r=a(n)&l,e=f[r],o=0;e!=c;){if(u(e,n))return s[r]=t;if(++o>=i)throw new Error("full hashmap");e=f[r=r+1&l]}return f[r]=n,s[r]=t,t},maybeSet:function(n,t){for(var r=a(n)&l,e=f[r],o=0;e!=c;){if(u(e,n))return s[r];if(++o>=i)throw new Error("full hashmap");e=f[r=r+1&l]}return f[r]=n,s[r]=t,t},get:function(n,t){for(var r=a(n)&l,e=f[r],o=0;e!=c;){if(u(e,n))return s[r];if(++o>=i)break;e=f[r=r+1&l]}return t},keys:function(){for(var n=[],t=0,r=f.length;t<r;++t){var e=f[t];e!=c&&n.push(e)}return n}}}},{}],20:[function(n,t,r){t.exports=function(o,i,a,n,u){3===arguments.length&&(n=Array,u=null);for(var c=new n(o=1<<Math.max(4,Math.ceil(Math.log(o)/Math.LN2))),f=o-1,t=0;t<o;++t)c[t]=u;return{add:function(n){for(var t=i(n)&f,r=c[t],e=0;r!=u;){if(a(r,n))return!0;if(++e>=o)throw new Error("full hashset");r=c[t=t+1&f]}return c[t]=n,!0},has:function(n){for(var t=i(n)&f,r=c[t],e=0;r!=u;){if(a(r,n))return!0;if(++e>=o)break;r=c[t=t+1&f]}return!1},values:function(){for(var n=[],t=0,r=c.length;t<r;++t){var e=c[t];e!=u&&n.push(e)}return n}}}},{}],21:[function(n,t,r){var f=n("./hashmap"),s=n("./extract"),l=n("./cut"),h=n("./dedup");function p(n){var t=n[0],r=n[1];return r<t&&(n=t,t=r,r=n),t+31*r}function g(n,t){var r,e=n[0],o=n[1],n=t[0],t=t[1];return o<e&&(r=e,e=o,o=r),t<n&&(r=n,n=t,t=r),e===n&&o===t}t.exports=function(n){var t=h(l(s(n))),r=t.coordinates,e=f(1.4*t.arcs.length,p,g);function o(n){n&&a.hasOwnProperty(n.type)&&a[n.type](n)}n=t.objects,t.arcs=t.arcs.map(function(n,t){return e.set(n,t),r.slice(n[0],n[1]+1)}),delete t.coordinates,r=null;var i,a={GeometryCollection:function(n){n.geometries.forEach(o)},LineString:function(n){n.arcs=u(n.arcs)},MultiLineString:function(n){n.arcs=n.arcs.map(u)},Polygon:function(n){n.arcs=n.arcs.map(u)},MultiPolygon:function(n){n.arcs=n.arcs.map(c)}};function u(n){var t=[];do{var r=e.get(n)}while(t.push(n[0]<n[1]?r:~r),n=n.next);return t}function c(n){return n.map(u)}for(i in n)o(n[i]);return t}},{"./cut":16,"./dedup":17,"./extract":18,"./hashmap":19}],22:[function(n,t,r){var q=n("./hashset"),L=n("./hashmap"),j=n("./point-hash"),F=n("./point-equal");t.exports=function(n){for(var o=n.coordinates,t=n.lines,r=n.rings,e=function(){for(var n=L(1.4*o.length,E,P,Int32Array,-1,Int32Array),t=new Int32Array(o.length),r=0,e=o.length;r<e;++r)t[r]=n.maybeSet(r,r);return t}(),i=new Int32Array(o.length),a=new Int32Array(o.length),u=new Int32Array(o.length),c=new Int8Array(o.length),f=0,s=0,l=o.length;s<l;++s)i[s]=a[s]=u[s]=-1;for(s=0,l=t.length;s<l;++s){var h=t[s],p=h[0],g=h[1],d=e[p],v=e[++p];for(++f,c[d]=1;++p<=g;)w(s,d,d=v,v=e[p]);++f,c[v]=1}for(s=0,l=o.length;s<l;++s)i[s]=-1;for(s=0,l=r.length;s<l;++s){var y=r[s],m=y[0]+1,M=y[1];for(w(s,e[M-1],d=e[m-1],v=e[m]);++m<=M;)w(s,d,d=v,v=e[m])}function w(n,t,r,e){var o;i[r]!==n&&(i[r]=n,0<=(o=a[r])?(n=u[r],o===t&&n===e||o===e&&n===t||(++f,c[r]=1)):(a[r]=t,u[r]=e))}function E(n){return j(o[n])}function P(n,t){return F(o[n],o[t])}i=a=u=null;for(var x,b=q(1.4*f,j,F),s=0,l=o.length;s<l;++s)c[x=e[s]]&&b.add(o[x]);return b}},{"./hashmap":19,"./hashset":20,"./point-equal":23,"./point-hash":24}],23:[function(n,t,r){t.exports=function(n,t){return n[0]===t[0]&&n[1]===t[1]}},{}],24:[function(n,t,r){var e=new ArrayBuffer(16),o=new Float64Array(e),i=new Uint32Array(e);t.exports=function(n){o[0]=n[0],o[1]=n[1];n=i[0]^i[1];return 2147483647&(n=n<<5^n>>7^i[2]^i[3])}},{}],25:[function(n,t,r){t.exports=function(n,e){function t(n){null==n.properties&&(n.properties={});var t=n.properties=e(n);if(t)for(var r in t)return;delete n.properties}arguments.length<2&&(e=function(){});var r,o,i={Feature:t,FeatureCollection:function(n){n.features.forEach(t)}};for(r in n)(o=n[r])&&i.hasOwnProperty(o.type)&&i[o.type](o);return n}},{}],26:[function(n,t,r){t.exports=function(n){for(var t in e)t in n||(n[t]=e[t]);return n.defaults=e,n};var e={Feature:function(n){n.geometry&&this.geometry(n.geometry)},FeatureCollection:function(n){for(var t=n.features,r=-1,e=t.length;++r<e;)this.Feature(t[r])},GeometryCollection:function(n){for(var t=n.geometries,r=-1,e=t.length;++r<e;)this.geometry(t[r])},LineString:function(n){this.line(n.coordinates)},MultiLineString:function(n){for(var t=n.coordinates,r=-1,e=t.length;++r<e;)this.line(t[r])},MultiPoint:function(n){for(var t=n.coordinates,r=-1,e=t.length;++r<e;)this.point(t[r])},MultiPolygon:function(n){for(var t=n.coordinates,r=-1,e=t.length;++r<e;)this.polygon(t[r])},Point:function(n){this.point(n.coordinates)},Polygon:function(n){this.polygon(n.coordinates)},object:function(n){return null==n?null:i.hasOwnProperty(n.type)?this[n.type](n):this.geometry(n)},geometry:function(n){return null!=n&&o.hasOwnProperty(n.type)?this[n.type](n):null},point:function(){},line:function(n){for(var t=-1,r=n.length;++t<r;)this.point(n[t])},polygon:function(n){for(var t=-1,r=n.length;++t<r;)this.line(n[t])}},o={LineString:1,MultiLineString:1,MultiPoint:1,MultiPolygon:1,Point:1,Polygon:1,GeometryCollection:1},i={Feature:1,FeatureCollection:1}},{}]},{},[1]);